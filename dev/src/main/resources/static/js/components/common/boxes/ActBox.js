import{r as y}from"../../../chunks/index.js";function b(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i=y();const x=b(i),k=e=>{var t;const r=e.match(/^([a-zA-Z]+)(\(([^)]*)\))?/);if(!r)return{act:"",op:[],status:""};const n=r[1],u=((t=r[3])==null?void 0:t.split(":"))??[];return{act:n,op:u,status:""}},C=(e,r,n,u)=>{i.useEffect(()=>{if(!r||!n||!u||!e.current)return;const t=e.current,l=()=>{const f=t.getAttribute("data-act-key"),d=document.querySelectorAll(`[data-act-key="${f}"]`);if(!f&&!d)return;n.split("/").forEach(p=>{let{act:o,op:c,status:s}=k(p);const h=new CustomEvent(`${o}:before`,{detail:{act:o,op:c,source:t}});switch(t.dispatchEvent(h),o){case"oneway":d.forEach(a=>{a!==t&&(s=a.getAttribute("data-act-status")??"",s=c[0],a.setAttribute("data-act-status",s))});break;case"toggle":d.forEach(a=>{s=a.getAttribute("data-act-status")??"";let A=c.findIndex(v=>v===s)+1,m=c.length;s=c[A%m],a.setAttribute("data-act-status",s)});break;case"selected":s=c[0],d.forEach(a=>{a!==t&&!a.contains(t)?a.removeAttribute("data-act-selected"):a.setAttribute("data-act-selected",s)});break}console.log(`Action '${o}' executed on #${u} | Status: ${s}`);const E=new CustomEvent(`${o}:after`,{detail:{act:o,op:c,source:t}});t.dispatchEvent(E)})};return t.addEventListener(r,l),()=>t.removeEventListener(r,l)},[r,n,u,e])};export{x as R,b as g,i as r,C as u};
